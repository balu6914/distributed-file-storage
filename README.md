
# Distributed File Storage

This project is a distributed file storage server implemented in Golang. It supports multithreaded file uploads, retrieval, and download, leveraging an RDB (Relational Database) for storage. The server splits files into parts for efficient storage and retrieval, allowing for parallel uploads and downloads. The application is documented using Swagger, providing a user-friendly API documentation interface.

## Features

- **Multithreaded Uploads**: Efficiently upload large files by splitting them into smaller parts and storing them in the database using multiple threads.
- **File Retrieval**: Retrieve file parts based on a unique file ID.
- **File Download**: Download the entire file by merging its stored parts.
- **API Documentation**: Swagger UI is integrated for interactive API documentation.
- **Dockerized**: Easily deploy the server using Docker and Docker Compose.

## Technologies Used

- **Golang**: Backend logic, including API handling and multithreading.
- **GORM**: ORM library for database interactions.
- **SQLite**: Relational database for storing file parts.
- **Fiber**: High-performance HTTP framework for Golang.
- **Swagger**: API documentation and testing.
- **Docker**: Containerization for easy setup and deployment.

## Prerequisites

- **Golang** v1.23 or later
- **Docker** and **Docker Compose**
- **Swag CLI** for generating Swagger documentation:
  ```bash
  go install github.com/swaggo/swag/cmd/swag@latest
  ```

## Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/balu6914/distributed-file-storage.git
   cd distributed-file-storage
   ```

2. **Install dependencies**:
   ```bash
   go mod download
   ```

3. **Generate Swagger documentation**:
   ```bash
   swag init
   ```

4. **Build and run with Docker**:
   ```bash
   docker-compose up --build
   ```

   The server will be available at `http://localhost:3000`.

## API Documentation

API documentation is available at `http://localhost:3000/docs/` once the server is running. The documentation allows you to interact with the API directly.

## API Endpoints

### 1. Upload a File
   - **URL**: `POST /upload`
   - **Description**: Upload a file, split it into parts, and store each part in the database.
   - **Parameters**:
     - `file` (form-data): The file to upload.
     - `fileID` (form-data): Unique identifier for the file.
   - **Responses**:
     - `200 OK`: Returns the `fileID` of the uploaded file.
     - `400 Bad Request`: If no file is provided.
     - `500 Internal Server Error`: If the file cannot be processed.

### 2. Retrieve File Parts
   - **URL**: `GET /files`
   - **Description**: Retrieve all parts of a file by its unique `fileID`.
   - **Parameters**:
     - `fileID` (query): Unique identifier for the file.
   - **Responses**:
     - `200 OK`: Returns an array of file parts.
     - `400 Bad Request`: If `fileID` is not provided.

### 3. Download a File
   - **URL**: `GET /download`
   - **Description**: Download the full file by merging its parts using the `fileID`.
   - **Parameters**:
     - `fileID` (query): Unique identifier for the file.
   - **Responses**:
     - `200 OK`: Returns the merged file as a binary stream.
     - `400 Bad Request`: If `fileID` is not provided.

## Running Locally

To run the server without Docker:

1. **Start the server**:
   ```bash
   go run main.go
   ```

2. **Access the API documentation**:
   - Open `http://localhost:3000/docs/` in your browser to see the Swagger UI.

## Project Structure

```
distributed-file-storage/
├── db/                   # Database connection and setup
│   └── db.go             # Contains the connection logic for SQLite using GORM
├── doc/                  # Documentation
│   └── IMPLEMENTATION.md # Implementation details (if applicable)
├── handlers/             # API route handlers
│   ├── download.go       # Logic for downloading and merging file parts
│   ├── getFiles.go       # Logic for retrieving file parts
│   └── upload.go         # Logic for uploading and splitting files
├── models/               # Database models
│   └── file.go           # Model definition for FilePart
├── main.go               # Entry point of the application
├── Dockerfile            # Docker configuration for building the application
├── docker-compose.yml    # Docker Compose setup for multi-container configuration
├── go.mod                # Go module dependencies
├── go.sum                # Go module checksums
├── README.md             # Project README
└── docs/                 # Swagger documentation files (generated by swag)


![image](https://github.com/user-attachments/assets/ad1d92ac-380a-4e50-a077-1b32f0cf8bab)


```

## Database

The application uses **SQLite** as the database for simplicity. Each file is split into parts and stored in the `FilePart` model, which contains the following fields:

- `ID`: Auto-incremented primary key.
- `FileID`: The unique identifier for the uploaded file.
- `Part`: The part number of the file.
- `Data`: The binary data of the file part.

## Contributing

If you'd like to contribute, please fork the repository and use a feature branch. Pull requests are welcome!

1. Fork the project.
2. Create a new branch (`git checkout -b feature/your-feature`).
3. Commit your changes (`git commit -m 'Add your feature'`).
4. Push to the branch (`git push origin feature/your-feature`).
5. Create a new pull request.

## License

This project is licensed under the MIT License. See the `LICENSE` file for details.

## Contact

For any inquiries or support, please contact:

- **Author**: Balaji
- **Email**: balajich1921@gmail.com

